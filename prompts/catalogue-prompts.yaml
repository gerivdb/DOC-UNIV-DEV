# Catalogue de Prompts Op√©rationnels - DOC-UNIV-DEV
# Templates optimis√©s pour RAG, synth√®se, et √©valuation
# ========================================================================

metadata:
  version: "1.0.0"
  created_at: "2025-11-03"
  description: "Collection de prompts op√©rationnels pour syst√®mes RAG et documentation"
  author: "DOC-UNIV-DEV Team"
  categories: ["retrieval", "synthesis", "evaluation", "citation", "quality"]

# ========================================================================
# PROMPTS DE R√âCUP√âRATION (RETRIEVAL)
# ========================================================================
retrieval_prompts:
  query_enhancement:
    name: "Enhanced Query Generation"
    description: "Am√©liore les requ√™tes utilisateur pour meilleure r√©cup√©ration"
    template: |
      Tu es un expert en recherche d'information technique.
      Transforme cette requ√™te utilisateur en requ√™te optimis√©e pour un syst√®me RAG sp√©cialis√© en ML/IA et architecture logicielle.
      
      Requ√™te originale: "{user_query}"
      
      G√©n√®re:
      1. Une requ√™te principale optimis√©e
      2. 2-3 requ√™tes alternatives couvrant diff√©rents angles
      3. Mots-cl√©s techniques pertinents
      
      Format de r√©ponse:
      PRIMARY: [requ√™te optimis√©e]
      ALT1: [premi√®re alternative]
      ALT2: [deuxi√®me alternative]
      KEYWORDS: [mots-cl√©s s√©par√©s par virgules]
    parameters:
      temperature: 0.3
      max_tokens: 200

  relevance_filtering:
    name: "Relevance Filter"
    description: "Filtre les documents r√©cup√©r√©s selon leur pertinence"
    template: |
      √âvalue la pertinence de ce document pour r√©pondre √† la question.
      
      Question: "{query}"
      Document: "{retrieved_document}"
      
      Crit√®res d'√©valuation:
      - Pertinence directe (0-10)
      - Qualit√© de l'information (0-10) 
      - Actualit√©/fra√Æcheur (0-10)
      - Compl√©tude pour r√©pondre (0-10)
      
      R√©ponds UNIQUEMENT avec le format JSON:
      {
        "relevant": true/false,
        "confidence": 0.0-1.0,
        "scores": {
          "directness": 0-10,
          "quality": 0-10,
          "freshness": 0-10,
          "completeness": 0-10
        },
        "reasoning": "Explication courte (max 50 mots)"
      }
    parameters:
      temperature: 0.1
      max_tokens: 150

# ========================================================================
# PROMPTS DE SYNTH√àSE
# ========================================================================
synthesis_prompts:
  technical_synthesis:
    name: "Technical Synthesis with Citations"
    description: "Synth√©tise informations techniques avec citations pr√©cises"
    template: |
      Tu es un documentaliste technique expert. Synth√©tise ces informations pour r√©pondre √† la question de mani√®re pr√©cise et actionnable.
      
      Question: "{query}"
      
      Sources disponibles:
      {sources}
      
      Instructions:
      1. R√©ponds de mani√®re structur√©e et actionnable
      2. Cite SYST√âMATIQUEMENT chaque affirmation avec [source:N]
      3. Distingue faits √©tablis vs opinions/recommandations
      4. Indique les limitations ou incertitudes
      5. Fournis des √©tapes concr√®tes quand applicable
      
      OBLIGATOIRE:
      - Au moins 3 citations [source:N] dans ta r√©ponse
      - Section "Limitations" si pertinente
      - Liens vers ressources compl√©mentaires si disponibles
    parameters:
      temperature: 0.2
      max_tokens: 800

  comparative_synthesis:
    name: "Comparative Analysis"
    description: "Compare diff√©rentes approches techniques avec avantages/inconv√©nients"
    template: |
      Compare les diff√©rentes approches mentionn√©es dans les sources pour r√©pondre √†: "{query}"
      
      Sources:
      {sources}
      
      Structure ta r√©ponse ainsi:
      
      ## üìä Comparaison des Approches
      
      ### Approche 1: [Nom]
      - **Avantages**: [avec citations]
      - **Inconv√©nients**: [avec citations]  
      - **Cas d'usage**: [quand l'utiliser]
      - **Complexit√©**: [Faible/Moyenne/√âlev√©e]
      
      ### Approche 2: [Nom]
      [M√™me structure]
      
      ## üèÜ Recommandation
      Approche recommand√©e selon le contexte avec justification.
      
      ## üìù Trade-offs Critiques
      Compromis principaux √† consid√©rer.
      
      Cite toutes les affirmations avec [source:N].
    parameters:
      temperature: 0.25
      max_tokens: 1000

# ========================================================================
# PROMPTS D'√âVALUATION
# ========================================================================
evaluation_prompts:
  response_quality_evaluator:
    name: "Response Quality Evaluator"
    description: "√âvalue la qualit√© d'une r√©ponse RAG selon crit√®res RAGAS"
    template: |
      √âvalue la qualit√© de cette r√©ponse RAG selon les crit√®res RAGAS.
      
      Question: "{question}"
      R√©ponse: "{answer}"
      Sources utilis√©es: {sources}
      
      √âvalue sur une √©chelle de 1-5:
      
      **1. FAITHFULNESS** (Fid√©lit√© aux sources)
      - La r√©ponse contient-elle des informations non support√©es par les sources?
      - Y a-t-il des contradictions avec les sources?
      - Score: [1-5] + justification
      
      **2. ANSWER RELEVANCY** (Pertinence de la r√©ponse)
      - La r√©ponse adresse-t-elle directement la question?
      - Y a-t-il des informations hors-sujet?
      - Score: [1-5] + justification
      
      **3. CONTEXT PRECISION** (Pr√©cision du contexte)
      - Les sources sont-elles pertinentes pour la question?
      - Y a-t-il du bruit dans les sources r√©cup√©r√©es?
      - Score: [1-5] + justification
      
      **4. CONTEXT RECALL** (Rappel du contexte)
      - Toutes les informations pertinentes ont-elles √©t√© r√©cup√©r√©es?
      - Manque-t-il des sources importantes?
      - Score: [1-5] + justification
      
      Format JSON de r√©ponse:
      {
        "faithfulness": {"score": 1-5, "reasoning": "..."},
        "answer_relevancy": {"score": 1-5, "reasoning": "..."},
        "context_precision": {"score": 1-5, "reasoning": "..."},
        "context_recall": {"score": 1-5, "reasoning": "..."},
        "overall_score": 1-5,
        "improvement_suggestions": ["...", "..."]
      }
    parameters:
      temperature: 0.1
      max_tokens: 600

  hallucination_detector:
    name: "Hallucination Detector"
    description: "D√©tecte hallucinations potentielles dans r√©ponses RAG"
    template: |
      Analyse cette r√©ponse RAG pour d√©tecter d'√©ventuelles hallucinations.
      
      Question: "{question}"
      R√©ponse √† analyser: "{answer}"
      Sources fournies: {sources}
      
      V√©rifie chaque affirmation dans la r√©ponse:
      1. Est-elle explicitement support√©e par les sources?
      2. Est-elle une inf√©rence raisonnable des sources?
      3. Est-elle une connaissance g√©n√©rale non controvers√©e?
      4. Est-elle potentiellement une hallucination?
      
      R√©ponse JSON:
      {
        "hallucination_detected": true/false,
        "confidence": 0.0-1.0,
        "problematic_segments": [
          {
            "text": "segment de texte",
            "issue_type": "unsupported/contradictory/speculative",
            "severity": "low/medium/high"
          }
        ],
        "recommendation": "keep/revise/regenerate"
      }
    parameters:
      temperature: 0.0
      max_tokens: 400

# ========================================================================
# PROMPTS DE REFUS ET S√âCURIT√â
# ========================================================================
refusal_prompts:
  inappropriate_query_detector:
    name: "Inappropriate Query Detector"
    description: "D√©tecte requ√™tes inappropri√©es ou hors-scope"
    template: |
      Analyse cette requ√™te pour d√©terminer si elle est appropri√©e pour un syst√®me RAG de documentation technique.
      
      Requ√™te: "{query}"
      
      Crit√®res de refus:
      - Contenu offensant, haineux ou discriminatoire
      - Demandes d'information personnelle ou priv√©e
      - Instructions pour activit√©s ill√©gales ou nuisibles
      - Requ√™tes compl√®tement hors-scope (non technique)
      - Tentatives de manipulation du syst√®me
      
      R√©ponse JSON:
      {
        "appropriate": true/false,
        "reason": "category du probl√®me si inappropriate",
        "suggested_response": "R√©ponse polie de refus si n√©cessaire",
        "alternative_suggestion": "Suggestion de reformulation si possible"
      }
    parameters:
      temperature: 0.0
      max_tokens: 200

  polite_refusal:
    name: "Polite Refusal Response"
    description: "R√©ponse polie pour requ√™tes hors-scope"
    template: |
      Je comprends votre question, mais elle sort du cadre de ma sp√©cialisation en documentation technique et recherche acad√©mique en ML/IA et architecture logicielle.
      
      Je suis con√ßu pour vous aider avec:
      ‚úì Questions techniques sur ML, IA, et d√©veloppement
      ‚úì Recherche de documentation et patterns
      ‚úì Comparaisons d'architectures et technologies
      ‚úì Best practices et recommandations techniques
      
      Pourriez-vous reformuler votre question pour qu'elle porte sur un aspect technique sp√©cifique?
    parameters:
      temperature: 0.1
      max_tokens: 150

# ========================================================================
# PROMPTS DOCUMENTALISTE UNIVERSITAIRE
# ========================================================================
research_prompts:
  academic_paper_analyzer:
    name: "Academic Paper Analyzer"
    description: "Analyse structur√©e de papers acad√©miques"
    template: |
      Analyse ce paper acad√©mique selon la m√©thodologie documentaliste universitaire.
      
      Paper: "{paper_content}"
      
      Structure ton analyse:
      
      ## üéØ **Synth√®se Ex√©cutive**
      - Contribution principale en 2-3 phrases
      - Nouveaut√© par rapport √† l'√©tat de l'art
      - Impact potentiel (th√©orique + pratique)
      
      ## üî¨ **M√©thodologie**
      - Approche utilis√©e
      - Datasets/exp√©rimentations
      - Limites m√©thodologiques
      
      ## üìä **R√©sultats Cl√©s**
      - M√©triques principales avec valeurs
      - Comparaisons avec baselines
      - Analyses statistiques importantes
      
      ## ‚ö° **Applications Pratiques**
      - Use cases concrets identifi√©s
      - Impl√©mentations possibles
      - Int√©gration avec ECOYSTEM existant
      
      ## üîó **Liens Conceptuels**
      - Concepts DOC-UNIV-DEV reli√©s
      - Patterns applicables
      - Repositories concern√©s
      
      ## ‚ö†Ô∏è **Limitations & Critiques**
      - Limites identifi√©es par auteurs
      - Critiques potentielles
      - Travaux futurs sugg√©r√©s
    parameters:
      temperature: 0.3
      max_tokens: 1200

  pattern_extractor:
    name: "Pattern Extractor"
    description: "Extrait patterns techniques depuis documentation/code"
    template: |
      Extrais les patterns techniques de cette documentation.
      
      Contenu: "{content}"
      Contexte: {context}
      
      Pour chaque pattern identifi√©:
      
      ## Pattern: [Nom du Pattern]
      
      **Probl√®me** : Quel probl√®me ce pattern r√©sout-il?
      
      **Solution** : Comment le pattern r√©sout-il le probl√®me?
      
      **Structure** : 
      ```
      [Sch√©ma ou code exemple]
      ```
      
      **Avantages** :
      - [B√©n√©fice 1]
      - [B√©n√©fice 2]
      
      **Inconv√©nients** :
      - [Limitation 1] 
      - [Limitation 2]
      
      **Contexte d'usage** : Quand utiliser ce pattern?
      
      **Anti-patterns** : Quelles erreurs √©viter?
      
      **Impl√©mentations** : Liens vers exemples concrets si disponibles
      
      Focus sur patterns **actionables et reproductibles**.
    parameters:
      temperature: 0.4
      max_tokens: 1000

# ========================================================================
# PROMPTS DE CITATION ET V√âRIFICATION
# ========================================================================
citation_prompts:
  citation_validator:
    name: "Citation Validator"
    description: "V√©rifie pr√©cision et pertinence des citations"
    template: |
      V√©rifie si cette citation est pr√©cise et pertinente.
      
      Affirmation: "{claim}"
      Source cit√©e: "{source_content}"
      Citation: [source:{source_id}]
      
      √âvalue:
      1. **Pr√©cision**: L'affirmation est-elle fid√®le √† la source?
      2. **Pertinence**: La source supporte-t-elle r√©ellement l'affirmation?
      3. **Contexte**: Le contexte original est-il respect√©?
      4. **Compl√©tude**: L'affirmation repr√©sente-t-elle fid√®lement la source?
      
      R√©ponds en JSON:
      {
        "valid": true/false,
        "confidence": 0.0-1.0,
        "issues": ["liste des probl√®mes identifi√©s"],
        "suggestion": "Am√©lioration propos√©e si n√©cessaire"
      }
    parameters:
      temperature: 0.0
      max_tokens: 200

# ========================================================================
# PROMPTS QUALIT√â ET VALIDATION
# ========================================================================
quality_prompts:
  completeness_checker:
    name: "Response Completeness Checker"
    description: "V√©rifie si une r√©ponse est compl√®te et actionable"
    template: |
      √âvalue la compl√©tude de cette r√©ponse technique.
      
      Question originale: "{original_question}"
      R√©ponse √† √©valuer: "{response}"
      
      Crit√®res d'√©valuation:
      
      **1. Compl√©tude conceptuelle**
      - Tous les aspects de la question sont-ils adress√©s?
      - Les concepts cl√©s sont-ils expliqu√©s?
      
      **2. Actionability**
      - La r√©ponse fournit-elle des √©tapes concr√®tes?
      - Les exemples sont-ils suffisamment d√©taill√©s?
      
      **3. Contexte technique**
      - Le niveau technique est-il appropri√©?
      - Les pr√©requis sont-ils mentionn√©s?
      
      **4. R√©f√©rences et approfondissement**
      - Y a-t-il des liens pour approfondir?
      - Les sources sont-elles cit√©es?
      
      R√©ponse JSON:
      {
        "completeness_score": 1-5,
        "actionability_score": 1-5,
        "technical_appropriateness": 1-5,
        "reference_quality": 1-5,
        "overall_score": 1-5,
        "missing_elements": ["liste ce qui manque"],
        "improvement_suggestions": ["suggestions concr√®tes"]
      }
    parameters:
      temperature: 0.1
      max_tokens: 400

  follow_up_generator:
    name: "Follow-up Question Generator"
    description: "G√©n√®re questions de suivi pertinentes"
    template: |
      Bas√© sur cette interaction RAG, g√©n√®re 3-5 questions de suivi pertinentes.
      
      Question originale: "{original_query}"
      R√©ponse fournie: "{response}"
      Domaine: {domain}
      
      G√©n√®re des questions qui:
      1. Approfondissent les concepts mentionn√©s
      2. Explorent les impl√©mentations pratiques
      3. Questionnent les alternatives
      4. Demandent des exemples concrets
      5. Explorent les liens avec d'autres domaines
      
      Format:
      **Questions d'Approfondissement:**
      - [Question qui creuse un concept]
      - [Question sur impl√©mentation]
      
      **Questions d'Exploration:**
      - [Question sur alternatives]
      - [Question sur exemples]
      
      **Questions Transverses:**
      - [Question liant √† d'autres domaines]
    parameters:
      temperature: 0.6
      max_tokens: 300

# ========================================================================
# PROMPTS SP√âCIALIS√âS PAR DOMAINE
# ========================================================================
domain_prompts:
  ml_specialist:
    name: "ML/AI Specialist"
    description: "Prompt sp√©cialis√© pour questions ML/IA avanc√©es"
    template: |
      Tu es un expert ML/IA avec expertise approfondie en RAG, LLMs, et architectures modernes.
      
      Question: "{query}"
      Sources techniques: {sources}
      
      R√©ponds avec:
      1. **Contexte th√©orique** : Fondements acad√©miques [avec citations]
      2. **Impl√©mentation pratique** : Approches concr√®tes [avec exemples]
      3. **Consid√©rations production** : Scalabilit√©, performance, monitoring
      4. **Trade-offs critiques** : Pr√©cision vs vitesse, co√ªt vs qualit√©
      5. **Resources compl√©mentaires** : Papers, repos, tools
      
      Niveau technique: **Avanc√©** (assume connaissance ML de base)
      Focus: **Production-ready solutions**
      
      Cite syst√©matiquement tes sources [source:N].
    parameters:
      temperature: 0.3
      max_tokens: 1000

  architecture_specialist:
    name: "Software Architecture Specialist"
    description: "Prompt pour questions d'architecture logicielle"
    template: |
      Tu es un architecte logiciel senior avec expertise en syst√®mes distribu√©s, microservices, et architectures modernes.
      
      Question: "{query}"
      Sources: {sources}
      
      Structure ta r√©ponse:
      
      ## üèóÔ∏è **Architecture Overview**
      Vue d'ensemble de l'approche recommand√©e
      
      ## üìä **Trade-offs Analysis** 
      - **Avantages** : [avec justifications]
      - **Inconv√©nients** : [avec impacts]
      - **Alternatives** : [autres approches possibles]
      
      ## ‚öôÔ∏è **Implementation Strategy**
      - √âtapes concr√®tes de mise en ≈ìuvre
      - Technologies/outils recommand√©s
      - Pi√®ges √† √©viter
      
      ## üìä **Scalability & Performance**
      - Consid√©rations de scalabilit√©
      - Points de performance critiques
      - M√©triques de monitoring
      
      **Ton** : Technique mais accessible, orient√© d√©cision et action.
    parameters:
      temperature: 0.4
      max_tokens: 1200

# ========================================================================
# USAGE GUIDELINES
# ========================================================================
usage_guidelines:
  prompt_selection:
    description: "Guide pour s√©lectionner le bon prompt"
    rules:
      - "Utiliser retrieval_prompts pour optimiser recherche"
      - "Utiliser synthesis_prompts pour g√©n√©rer r√©ponses"
      - "Utiliser evaluation_prompts pour validation qualit√©"
      - "Utiliser refusal_prompts pour s√©curit√©"
      - "Adapter temp√©rature selon cr√©ativit√© requise"
  
  quality_control:
    description: "Contr√¥le qualit√© r√©ponses"
    mandatory_checks:
      - "Au moins 2 citations [source:N] pour affirmations factuelles"
      - "Structure claire avec headers"
      - "Informations actionables quand applicable"
      - "Limitations mentionn√©es si pertinentes"
      - "Liens ressources compl√©mentaires"

# ========================================================================
# EXEMPLES D'UTILISATION
# ========================================================================
examples:
  basic_rag_flow:
    description: "Flow RAG standard avec prompts"
    steps:
      1. "Query enhancement avec retrieval_prompts.query_enhancement"
      2. "R√©cup√©ration documents avec query am√©lior√©e"
      3. "Filtrage pertinence avec citation_prompts.relevance_filtering"
      4. "Synth√®se avec synthesis_prompts.technical_synthesis"
      5. "√âvaluation avec evaluation_prompts.response_quality_evaluator"
      6. "D√©tection hallucination avec evaluation_prompts.hallucination_detector"
  
  research_paper_flow:
    description: "Analyse de paper acad√©mique"
    steps:
      1. "Extraction contenu paper"
      2. "Analyse avec research_prompts.academic_paper_analyzer"
      3. "Extraction patterns avec research_prompts.pattern_extractor"
      4. "G√©n√©ration questions avec quality_prompts.follow_up_generator"
      5. "Int√©gration dans corpus DOC-UNIV-DEV"